<header>
  <nav class="navbar navbar-expand-lg navbar-dark snack-navbar" aria-label="Main navigation">
    <div class="container-fluid">
      <a class="navbar-brand d-flex align-items-center" routerLink="/">
        <img src="assets/snackicon.jpg" alt="Snackify Logo" width="36" height="36" class="me-2 rounded-circle" />
        Snackify
      </a>

      <button class="navbar-toggler" type="button" (click)="toggleNavbar()" [attr.aria-expanded]="navbarOpen" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="navbar-collapse" [ngClass]="{'show': navbarOpen, 'collapse': true}" id="snackNavbar">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <li class="nav-item"><a class="nav-link" routerLink="/" routerLinkActive="active">Home</a></li>
          <li class="nav-item" *ngIf="authService.isLoggedIn()"><a class="nav-link" routerLink="/request" routerLinkActive="active">Request Snack</a></li>
          <li class="nav-item" *ngIf="authService.isLoggedIn()"><a class="nav-link" routerLink="/snack-list" routerLinkActive="active">Snack List</a></li>
          <li class="nav-item" *ngIf="authService.isAdmin() | async">
            <a class="nav-link position-relative" routerLink="/admin" routerLinkActive="active">
              Admin Dashboard
              <span *ngIf="pendingRequestCount > 0" class="badge bg-danger rounded-pill ms-1">{{ pendingRequestCount }}</span>
            </a>
          </li>
        </ul>
        <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
          <li class="nav-item">
            <a class="nav-link" (click)="showHelpModal()" style="cursor: pointer;">‚ùì Help</a>
          </li>
          <li class="nav-item" *ngIf="!authService.isLoggedIn()"><a class="nav-link" routerLink="/login" routerLinkActive="active">Login</a></li>
          <li class="nav-item" *ngIf="!authService.isLoggedIn()"><a class="nav-link" routerLink="/register" routerLinkActive="active">Register</a></li>
          <li class="nav-item" *ngIf="authService.isLoggedIn()">
            <a class="nav-link logout-link" (click)="logout()">Logout</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>
</header>

<main>
  <router-outlet></router-outlet>
</main>

<footer class="footer mt-auto py-1 fixed-bottom">
  <div class="container text-center p-0">
    <small class="text-muted">Made with ‚ù§Ô∏è for JW by Ashby</small>
  </div>
</footer>

<!-- Help Modal -->
<div class="modal fade" id="helpModal" tabindex="-1" aria-labelledby="helpModalLabel" aria-hidden="true" [class.show]="helpModalOpen" [style.display]="helpModalOpen ? 'block' : 'none'">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content" style="background: linear-gradient(135deg, #23272b 0%, #343a40 100%); color: #fff; border: 2px solid #ff3b3b;">
      <div class="modal-header" style="border-bottom: 1px solid rgba(255, 59, 59, 0.3);">
        <h5 class="modal-title" id="helpModalLabel" style="color: #fff;">‚ùì Need Help?</h5>
        <button type="button" class="btn-close btn-close-white" (click)="closeHelpModal()" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <h6 class="mb-3" style="color: #ff3b3b;">üìû Forgot Password? Need to update your name?</h6>
        <p class="mb-4" style="color: rgba(255, 255, 255, 0.9);">
          For help with <strong style="color: #fff;">changing your password</strong> or <strong style="color: #fff;">updating your display name</strong>, 
          please contact <strong style="color: #ff3b3b;">Colleen or Amber on Teams</strong>.
        </p>
        <hr style="border-color: rgba(255, 59, 59, 0.3);">
        <h6 class="mb-3" style="color: #ff3b3b;">üí° Quick Tips</h6>
        <ul style="color: rgba(255, 255, 255, 0.9);">
          <li>Use the <strong style="color: #fff;">Request Snack</strong> page to submit new snack requests</li>
          <li>Check the <strong style="color: #fff;">Snack List</strong> to view everyone's requests</li>
        </ul>
      </div>
      <div class="modal-footer" style="border-top: 1px solid rgba(255, 59, 59, 0.3);">
        <button type="button" class="btn btn-danger" (click)="closeHelpModal()">Close</button>
      </div>
    </div>
  </div>
</div>
<div class="modal-backdrop fade" [class.show]="helpModalOpen" *ngIf="helpModalOpen" (click)="closeHelpModal()" style="background-color: rgba(0, 0, 0, 0.7);"></div>